# Скрипты для работы с тестовыми данными

## Описание

Эти скрипты позволяют генерировать и загружать тестовые данные (фикстуры) в базу данных проекта QuickVote.

## Структура данных

- **14 пользователей** - включая `demo_user` с 10 опросами для демонстрации
- **37 опросов** - с различными типами вопросов (single, multiple, text, rating)
- **253 ответа** - на различные опросы

## Использование

### 1. Генерация фикстур

Сгенерировать JSON файл с тестовыми данными:

```bash
python scripts/generate_fixtures.py
```

Это создаст файл `fixtures/test_data.json` с данными:
- Пользователи (username, email, password и т.д.)
- Опросы с вопросами и вариантами ответов
- Ответы на опросы

### 2. Загрузка данных в базу

Загрузить данные из JSON файла в базу данных:

```bash
python scripts/load_fixtures.py
```

Скрипт:
- Создаст пользователей (если их еще нет)
- Создаст опросы с вопросами и вариантами ответов
- Создаст ответы на опросы

**Примечание:** Скрипт пропускает уже существующих пользователей и дубликаты ответов.

## Тестовые пользователи

Все пользователи имеют пароль: `TestPass123!`

### Основной пользователь для демонстрации:
- **Username:** `demo_user`
- **Email:** `demo_user@example.com`
- **Опросов:** 10

### Другие пользователи:
- `john_doe`, `jane_smith`, `alex_petrov`, `maria_ivanova`
- `test_user`, `admin_demo`, `survey_master`, `research_pro`
- `data_analyst`, `marketing_guru`, `feedback_collector`
- `poll_creator`, `user_researcher`

## Формат данных

### Пользователь
```json
{
  "username": "demo_user",
  "email": "demo_user@example.com",
  "password": "TestPass123!",
  "display_name": "Demo User",
  "bio": "Тестовый пользователь",
  "organization": "Организация В",
  "email_confirmed": true
}
```

### Опрос
```json
{
  "id": 1,
  "author_username": "demo_user",
  "title": "Оценка удовлетворенности клиентов",
  "description": "Помогите нам улучшить качество обслуживания",
  "survey_type": "anonymous",
  "status": "active",
  "ends_at": "2025-12-23T20:00:00",
  "welcome_message": "Добро пожаловать!",
  "thank_you_message": "Спасибо за ваш ответ!",
  "questions": [...]
}
```

### Ответ
```json
{
  "id": 1,
  "survey_id": 1,
  "user_username": "john_doe",
  "is_anonymous": false,
  "submitted_at": "2025-11-23T20:00:00",
  "duration_seconds": 120,
  "answers": [...]
}
```

## Примечания

- Скрипт генерации создает случайные данные, поэтому при каждом запуске результаты будут разными
- При загрузке существующие пользователи не перезаписываются
- Дубликаты ответов от одного пользователя на один опрос пропускаются
- Черновики (draft) не получают ответы

